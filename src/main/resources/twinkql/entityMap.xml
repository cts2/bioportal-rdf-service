<?xml version="1.0" encoding="UTF-8"?>
<sparqlMap namespace="entity"
	xmlns="http://mayo.edu/twinkql" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	
	<compositeResultMap id="entityDirectoryEntryResultMap" 
		resultClass="edu.mayo.cts2.framework.model.entity.NamedEntityDescription">
		<tripleMap var="s" varType="localName" predicateUri="rdfs:type" beanProperty="entityID.name"/>
	</compositeResultMap>
	
	<select id="getEntityDirectoryEntries" resultMap="entityDirectoryEntryResultMap">

		SELECT  ?termURI ?prefLabel
		
		WHERE {
		      ?termURI a owl:Class;
		      skos:prefLabel ?prefLabel .
		} 

	    LIMIT  #{limit}
	    OFFSET #{offset}
	  
	</select>
	
	<select id="getEntityByUri" resultMap="entityDescriptionResultMap">

		SELECT  ?p ?o
		FROM bpOntologies:#{ontologyId} 
		WHERE {
 			<![CDATA[
      		<#{uri}> ?p ?o .
  			]]>
		} 
	</select>
	
</sparqlMap>
