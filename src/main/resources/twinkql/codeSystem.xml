<?xml version="1.0" encoding="UTF-8"?>
<sparqlMap namespace="codeSystem"
	xmlns="http:mayo.edu/twinkql" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	
	<resultMap id="codeSystemCatalogResult" resultClass="edu.mayo.cts2.framework.model.codesystem.CodeSystemCatalogEntry">
		<triplesMap>
			<tripleMap objectPart="localName" predicateUri="asdf" beanProperty="test.bean.prop"/>
		</triplesMap>	
	</resultMap>
	
	<resultMap id="codeSystemCatalogSummaryResult" resultClass="edu.mayo.cts2.framework.model.codesystem.CodeSystemCatalogEntrySummary">
		<rowMap var="abr" varType="literalValue" beanProperty="resourceName"/>
		<rowMap var="abr" varType="literalValue" beanProperty="codeSystemName"/>
		<rowMap var="description" varType="literalValue" beanProperty="resourceSynopsis.value.content"/>
		<rowMap var="s" varType="uri" beanProperty="about"/>
	</resultMap>
	
	
	<select id="getCodeSystemCatalogSummaries" resultMap="codeSystemCatalogSummaryResult">
	<![CDATA[

		SELECT ?s ?abr ?description
		WHERE { 
		  GRAPH ?graphURI { 
		    ?s a <http://www.w3.org/2002/07/owl#Ontology> . 
		    ?s <http://purl.bioontology.org/ontology/bioportal/abbreviation> ?abr . 
		    OPTIONAL { ?s <http://purl.bioontology.org/ontology/bioportal/description> ?description . } 
		    OPTIONAL { ?s <http://purl.bioontology.org/ontology/bioportal/format> ?format . } 
		    OPTIONAL { ?s <http://purl.bioontology.org/ontology/bioportal/displayLabel> ?label . } 
		    OPTIONAL { ?s <http://purl.bioontology.org/ontology/bioportal/uri> ?uri . } 
		    OPTIONAL { ?s <http://purl.org/dc/elements/1.1/creator> ?creator . } 
		    OPTIONAL { ?s <http://purl.org/dc/elements/1.1/contributor> ?contributor . } 
		    OPTIONAL { ?s <http://www.w3.org/2002/07/owl#imports> ?imports . } 
		    OPTIONAL { ?s <http://purl.org/dc/elements/1.1/title> ?title } 
		  } 
	    }
	    LIMIT  #{limit}
	    OFFSET #{offset}
	 
	 ]]>
	</select>
	
	<select id="getCodeSystemByUri">
	<![CDATA[

		SELECT ?p ?o
		WHERE {
 			GRAPH <#{uri}> {
   				?s a <http://www.w3.org/2002/07/owl#Ontology>;
   				?p ?o
   			}
		}
	 
	 ]]>
	</select>
</sparqlMap>
